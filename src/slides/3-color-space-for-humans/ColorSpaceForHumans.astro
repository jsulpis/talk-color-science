---
import CodeBlock from "../../components/CodeBlock.astro";
import PartTitle from "../../components/PartTitle.astro";
import Slide from "../../components/Slide.astro";
import VideoSlide from "../../components/VideoSlide.astro";
import cielab from "./assets/cielab-visible.webm";
import cielch from "./assets/cielch-visible.webm";
import srgb from "./assets/srgb.mov";
import palette from "./assets/palette.jpg";
import gradients from "./assets/gradient.avif";
import Gradients from "./gradients/Gradients.astro";
import HSLPalette from "./palette/HSLPalette.astro";
import OKLCHPalette from "./palette/OKLCHPalette.astro";
import LchSrgb3d from "./srgb/LchSrgb.svelte";
import SectionTitle from "../../components/SectionTitle.astro";
---

<PartTitle index={3}>Un espace de couleur<br />pour les humains</PartTitle>

<Slide title="üéÖ Un nouvel espace de couleurs...">
	<ul>
		<li>Fid√®le √† la perception humaine des couleurs ü§û</li>
	</ul>
</Slide>

<Slide title="CIE LAB 1976">
	<div is:raw style="font-size: 1.5rem;">
		\[\begin{aligned}
			L* &= 116f(\frac{Y}{Y_n}) - 16 \\
			a* &= 500(f(\frac{X}{X_n}) - f(\frac{Y}{Y_n})) \\
			b* &= 200(f(\frac{Y}{Y_n}) - f(\frac{Z}{Z_n})) \\ \\
			\text{o√π :} \\
  		f(t) &= \begin{cases}
							\sqrt[3]{t} & \text{si } t > \delta^3 \\[4mu]
							\tfrac13 t \delta^{-2} + \tfrac{4}{29} & \text{sinon}
						\end{cases} \\
  		\delta &= \tfrac{6}{29} \\ \\
			(X_n, Y_n, Z_n)& \text{ coordonn√©es du blanc de r√©f√©rence}
		\end{aligned} \]
	</div>
</Slide>

<VideoSlide
	title="CIE LAB 1976"
	src={cielab}
	link="https://commons.wikimedia.org/wiki/File:Visible_gamut_within_CIELAB_color_space_D65_whitepoint_mesh.webm"
	authors="Michael Horvath, Christoph Lipka"
/>

<Slide title="CIE LCH 1976">
	<div is:raw style="font-size: 2rem; margin-top: 3em; line-height: 2em;">
		\[\begin{aligned}
			C^* &= \sqrt{a^{*2} + b^{*2}} \\
			h &= \arctan \frac{b^*}{a^*}
		\end{aligned} \]
	</div>
</Slide>

<VideoSlide
	title="CIE LCH 1976"
	src={cielch}
	link="https://commons.wikimedia.org/wiki/File:Visible_gamut_within_CIELCHab_color_space_D65_whitepoint_mesh.webm"
	authors="Michael Horvath, Christoph Lipka"
/>

<Slide>
	<figure>
		<!-- made from https://www.shadertoy.com/view/XddGRN -->
		<video data-src={srgb} loop data-autoplay></video>
		<figcaption>sRGB / LCH</figcaption>
	</figure>
</Slide>

<Slide>
	<LchSrgb3d client:visible />
</Slide>

<Slide title="Bj√∂rn Ottosson, 2020">
	<ul class="fragment oklch">
		<li>LAB &rightarrow; OKLAB</li>
		<li>LCH &rightarrow; OKLCH</li>
	</ul>
</Slide>

<SectionTitle background={palette.src}> Palettes de couleurs </SectionTitle>

<Slide title="Palette HSL">
	<HSLPalette />
</Slide>

<Slide title="Palette HSL">
	<div class="container hsl">
		<article class="success">
			<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" width="1em" height="1em" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m9 12l2 2l4-4m6 2a9 9 0 1 1-18 0a9 9 0 0 1 18 0"></path></svg>
			<span>Lorem ipsum</span>
			<svg viewBox="0 0 24 24" focusable="false" height="32" width="32" fill="currentColor"><path d="M0 0h24v24H0z" fill="none"></path><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
		</article>
		<article class="info">
			<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" width="1em" height="1em" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 1 1-18 0a9 9 0 0 1 18 0"></path></svg>
			<span>Lorem ipsum</span>
			<svg viewBox="0 0 24 24" focusable="false" height="32" width="32" fill="currentColor"><path d="M0 0h24v24H0z" fill="none"></path><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
		</article>
	</div>
</Slide>

<Slide title="Palette OKLCH">
	<OKLCHPalette />
</Slide>

<Slide title="Palette OKLCH">
	<div class="container oklch">
		<article class="success">
			<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" width="1em" height="1em" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m9 12l2 2l4-4m6 2a9 9 0 1 1-18 0a9 9 0 0 1 18 0"></path></svg>
			<span>Lorem ipsum</span>
			<svg viewBox="0 0 24 24" focusable="false" height="32" width="32" fill="currentColor"><path d="M0 0h24v24H0z" fill="none"></path><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
		</article>
		<article class="info">
			<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" width="1em" height="1em" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 1 1-18 0a9 9 0 0 1 18 0"></path></svg>
			<span>Lorem ipsum</span>
			<svg viewBox="0 0 24 24" focusable="false" height="32" width="32" fill="currentColor"><path d="M0 0h24v24H0z" fill="none"></path><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
		</article>
	</div>
</Slide>

<SectionTitle background={gradients.src}>
	Gradients
</SectionTitle>

<Gradients />

<Slide>
	<CodeBlock lang="css">
		{
			`.gradient {
	background-image: linear-gradient(in oklab, blue, yellow);
}`
		}
	</CodeBlock>
	<p class="fragment">Ou librairies : <a href="https://colorjs.io/">Color.js</a>, <a href="https://culorijs.org/">Culori</a>...</p>
</Slide>

<style lang="scss">
	video {
		border-radius: 16px;
	}
	figcaption {
		font-size: 3rem;
		font-weight: bold;
	}
	ul.oklch {
		margin-top: 1em;
		font-size: 3rem;
	}
	p {
		margin-top: 1em;
	}
	.container {
		height: 50dvh;
		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: center;
		gap: 1em;

		article {
			display: flex;
			gap: .5em;
			align-items: center;
			border: 3px solid;
			padding: .5em .7em;
			border-radius: .5em;
		}
		span {
			margin-bottom: .1em;
			margin-right: 2em;
			font-size: .8em;
		}
		&.hsl {
			.success {
				color: hsl(90deg, 90%, 50%);
				background: hsl(90deg, 80%, 10%);
			}
			.info {
				color: hsl(240deg, 90%, 50%);
				background: hsl(240deg, 80%, 10%);
			}
		}
		&.oklch {
			.success {
				color: oklch(75% .21 150);
				background:  oklch(20% .12 150);
			}
			.info {
				color: oklch(75% .21 240);
				background:  oklch(20% .12 240);
			}
		}
	}
</style>
